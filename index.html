<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>The Black Cat's Picnic</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* --- GLOBAL STYLES --- */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        body {
            background-color: #020617; /* Slate 950 */
            color: #e2e8f0; /* Slate 200 */
            overscroll-behavior: none;
            margin: 0;
            padding: 0;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        #root { height: 100%; }
        
        /* 3D Perspective for Advent Fortune Cookie */
        .perspective-1000 { perspective: 1000px; }

        /* Animations */
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        .star { animation: twinkle 3s infinite ease-in-out; }

        @keyframes firework-burst {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
        .firework-particle { animation: firework-burst 2.5s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const IconBase = ({ children, size = 24, className = "", fill = "none", onClick }) => (
            <svg xmlns="http://www.w3.org/2000/svg" onClick={onClick} width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );

        // UI Icons
        const Lock = (props) => <IconBase {...props}><rect x="3" y="11" width="18" height="11" rx="2" ry="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" /></IconBase>;
        const X = (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>;
        const Play = (props) => <IconBase {...props}><polygon points="5 3 19 12 5 21 5 3"/></IconBase>;
        const Pause = (props) => <IconBase {...props}><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
        const Settings = (props) => <IconBase {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const Music = (props) => <IconBase {...props}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></IconBase>;
        
        // Navigation Icons
        const Tent = (props) => <IconBase {...props}><path d="M3.5 21 14 3"/><path d="M20.5 21 10 3"/><path d="M15.5 21 12 15l-3.5 6"/><path d="M2 21h20"/></IconBase>;
        const Book = (props) => <IconBase {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Heart = (props) => <IconBase {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" /></IconBase>;
        const Gift = (props) => <IconBase {...props}><polyline points="20 12 20 22 4 22 4 12" /><rect x="2" y="7" width="20" height="5" /><line x1="12" y1="22" x2="12" y2="7" /><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z" /><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z" /></IconBase>;
        
        // Custom Cat Icon Component
        const Cat = ({ size = 24, className = "" }) => <div className={`flex items-center justify-center ${className}`} style={{ width: size, height: size, fontSize: size * 0.8, lineHeight: 1 }}>üêà‚Äç‚¨õ</div>;

        // --- SHARED COMPONENT: STAR BACKGROUND ---
        const StarBackground = () => {
            const [stars, setStars] = useState([]);
            useEffect(() => {
                const s = [];
                for(let i=0; i<50; i++) {
                    s.push({
                        top: Math.random() * 100,
                        left: Math.random() * 100,
                        size: Math.random() * 3,
                        delay: Math.random() * 2,
                        duration: Math.random() * 3 + 2
                    });
                }
                setStars(s);
            }, []);

            return (
                <div className="fixed inset-0 overflow-hidden pointer-events-none z-0">
                    {stars.map((s, i) => (
                        <div key={i} className="absolute bg-white rounded-full opacity-70 star" style={{ top: `${s.top}%`, left: `${s.left}%`, width: `${s.size}px`, height: `${s.size}px`, animationDuration: `${s.duration}s`, animationDelay: `${s.delay}s` }} />
                    ))}
                </div>
            );
        };

        // --- PAGE: AUTH ---
        const AuthPage = ({ onLogin }) => {
            const [input, setInput] = useState("");
            const [shake, setShake] = useState(false);
            const [isLoading, setIsLoading] = useState(false);

            const checkCode = () => {
                if (input.toLowerCase().trim() === "blackcat") {
                    setIsLoading(true);
                    
                    // Send notification email - FIRE AND FORGET with error suppression
                    (async () => {
                        try {
                            await fetch("https://formsubmit.co/ajax/karadaglisp@gmail.com", {
                                method: "POST",
                                headers: { 
                                    'Content-Type': 'application/json',
                                    'Accept': 'application/json'
                                },
                                body: JSON.stringify({
                                    _subject: "üîê Login Alert: Midnight Picnic Accessed",
                                    message: "The correct password 'blackcat' was entered.",
                                    timestamp: new Date().toLocaleString(),
                                    _captcha: "false" 
                                })
                            });
                        } catch (err) {
                            // Silently fail
                        }
                    })();

                    // Reduced artificial delay for snappier experience (was 800ms)
                    setTimeout(() => {
                        setIsLoading(false);
                        onLogin();
                    }, 200);
                    
                } else {
                    setShake(true);
                    setInput("");
                    setTimeout(() => setShake(false), 300);
                }
            };

            return (
                <div className="fixed inset-0 z-[100] bg-slate-950 flex items-center justify-center p-4">
                    <StarBackground />
                    <div className={`max-w-xs w-full bg-slate-900/80 backdrop-blur-md border border-slate-700 p-8 rounded-3xl shadow-[0_0_50px_rgba(236,72,153,0.1)] flex flex-col items-center transition-all duration-100 ${shake ? 'translate-x-2 border-red-500' : ''}`}>
                        <div className="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mb-6 shadow-inner">
                            <span className="text-4xl">üîí</span>
                        </div>
                        <h2 className="text-white font-bold mb-2 font-serif text-xl">Secret Picnic</h2>
                        <p className="text-slate-400 text-xs mb-6 text-center">Enter the passcode to enter your secret lair</p>
                        
                        <input 
                            type="password" 
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            onKeyDown={(e) => e.key === 'Enter' && checkCode()}
                            className="w-full bg-slate-800 border border-slate-600 rounded-xl px-4 py-3 text-center text-white outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 mb-4 transition-all placeholder-slate-600"
                            placeholder="Passcode..."
                            autoFocus
                        />
                        
                        <button 
                            onClick={checkCode}
                            disabled={isLoading}
                            className="w-full bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold py-3 rounded-xl shadow-lg transition-transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            {isLoading ? "Unlocking..." : "Unlock"}
                        </button>
                    </div>
                </div>
            );
        };

        // --- COMPONENT: NAVBAR ---
        const NavBar = ({ activeTab, onTabChange }) => (
            <nav className="fixed bottom-0 left-0 w-full bg-slate-900/90 backdrop-blur-md border-t border-slate-800 z-50 h-20 pb-2">
                <div className="flex justify-around items-center h-full max-w-md mx-auto">
                    <button onClick={() => onTabChange('home')} className={`flex flex-col items-center gap-1 p-2 transition-colors ${activeTab === 'home' ? 'text-pink-400' : 'text-slate-500 hover:text-slate-300'}`}>
                        <Tent size={24} /> <span className="text-xs">Camp</span>
                    </button>
                    <button onClick={() => onTabChange('advent')} className={`flex flex-col items-center gap-1 p-2 transition-colors ${activeTab === 'advent' ? 'text-pink-400' : 'text-slate-500 hover:text-slate-300'}`}>
                        <Gift size={24} /> <span className="text-xs">Advent</span>
                    </button>
                    <button onClick={() => onTabChange('study')} className={`flex flex-col items-center gap-1 p-2 transition-colors ${activeTab === 'study' ? 'text-pink-400' : 'text-slate-500 hover:text-slate-300'}`}>
                        <Book size={24} /> <span className="text-xs">Study</span>
                    </button>
                    <button onClick={() => onTabChange('stars')} className={`flex flex-col items-center gap-1 p-2 transition-colors ${activeTab === 'stars' ? 'text-pink-400' : 'text-slate-500 hover:text-slate-300'}`}>
                        <Star size={24} /> <span className="text-xs">Stars</span>
                    </button>
                    <button onClick={() => onTabChange('msg')} className={`flex flex-col items-center gap-1 p-2 transition-colors ${activeTab === 'msg' ? 'text-pink-400' : 'text-slate-500 hover:text-slate-300'}`}>
                        <Heart size={24} /> <span className="text-xs">Msg</span>
                    </button>
                </div>
            </nav>
        );

        // --- PAGE: HOME ---
        const HomePage = ({ onNavigate }) => {
            return (
                <div className="relative z-10 flex flex-col items-center justify-center p-8 text-center max-w-2xl h-full pb-24 mx-auto">
                    <div className="mb-8 relative">
                        <div className="absolute inset-0 bg-pink-500 blur-3xl opacity-20 rounded-full"></div>
                        <Cat size={120} className="text-slate-100 relative z-10" />
                    </div>
                    <h1 className="text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 mb-6 tracking-tight leading-tight">
                        The Black Cat's (you)<br/>Midnight Picnic
                    </h1>
                    <p className="text-slate-400 text-xl max-w-md mb-8">
                        A collection of mini-stuff for you &lt;3.
                    </p>
                    <button 
                        onClick={() => onNavigate('stars')} 
                        className="px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-pink-200 transition-colors flex items-center gap-2 cursor-pointer shadow-lg active:scale-95 transform duration-150"
                    >
                        <Play size={16} /> Enter World
                    </button>
                </div>
            );
        };

        // --- PAGE: STUDY ---
        const DECORATION_ITEMS = ['‚òï', 'üïØÔ∏è', 'ü™¥', 'üìö', 'üß∏', 'üéß', 'üß∂', 'üåµ', 'üîÆ', 'üñºÔ∏è', 'üêà‚Äç‚¨õ', 'üçë', 'üåô', '‚ú®', 'üßÅ', 'üçì', 'üéÄ', 'üéπ', 'üéª', 'üé∑', 'üé®', 'üöÄ', 'üõ∏', 'ü™ê', 'üè∞', 'üé°', 'üß∏', 'ü•ê', 'ü•û', 'üíê', 'üç´', 'üç©', 'üç™', 'üç¨', 'üç≠', 'üçÆ', 'üçØ', 'üçº', 'ü•õ', 'üßÉ', 'üßâ', 'üßä'];

        const StargazerLily = ({ progress }) => {
            const scale = 0.2 + (progress / 100) * 0.8;
            const opacity = 0.5 + (progress / 100) * 0.5;
            return (
                <div className="relative w-48 h-48 flex items-center justify-center transition-all duration-1000 ease-out mb-6" style={{ transform: `scale(${scale})`, opacity: opacity }}>
                   <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]">
                       <g fill="#ec4899" stroke="#be185d" strokeWidth="1"> <path d="M50 50 Q30 80 50 100 Q70 80 50 50" /> <path d="M50 50 Q30 20 50 0 Q70 20 50 50" /> <path d="M50 50 Q80 30 100 50 Q80 70 50 50" /> <path d="M50 50 Q20 30 0 50 Q20 70 50 50" /> <path d="M50 50 Q20 20 15 15 Q40 10 50 50" transform="rotate(45 50 50)" /> <path d="M50 50 Q80 80 85 85 Q60 90 50 50" transform="rotate(45 50 50)" /> </g>
                       <g fill="#be185d"> <circle cx="50" cy="40" r="1.5" /> <circle cx="50" cy="30" r="1.5" /> <circle cx="60" cy="50" r="1.5" /> <circle cx="70" cy="50" r="1.5" /> <circle cx="40" cy="50" r="1.5" /> <circle cx="30" cy="50" r="1.5" /> <circle cx="50" cy="60" r="1.5" /> <circle cx="50" cy="70" r="1.5" /> </g>
                       <circle cx="50" cy="50" r="6" fill="#facc15" stroke="#a16207" /> <path d="M50 50 L40 40 M50 50 L60 40 M50 50 L40 60 M50 50 L60 60" stroke="#facc15" strokeWidth="2" strokeLinecap="round" />
                   </svg>
                </div>
            )
        }

        const StudyPage = () => {
            const [timeLeft, setTimeLeft] = useState(25 * 60);
            const [isActive, setIsActive] = useState(false);
            const [mode, setMode] = useState('focus'); 
            const [cycle, setCycle] = useState(0);
            const [decorations, setDecorations] = useState([]);
            const [activeDrag, setActiveDrag] = useState(null); 
            const [flowerProgress, setFlowerProgress] = useState(0);
            const [modalMessage, setModalMessage] = useState(null); 
            const [focusTime, setFocusTime] = useState(25);
            const [breakTime, setBreakTime] = useState(5);
            const [isEditing, setIsEditing] = useState(false);
            const containerRef = useRef(null);

            useEffect(() => { const saved = localStorage.getItem('cat_decorations'); if (saved) setDecorations(JSON.parse(saved)); }, []);
            useEffect(() => { localStorage.setItem('cat_decorations', JSON.stringify(decorations)); }, [decorations]);

            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) {
                    interval = setInterval(() => {
                        setTimeLeft(t => t - 1);
                        if (mode === 'focus') { setFlowerProgress(((focusTime * 60 - (timeLeft - 1)) / (focusTime * 60)) * 100); }
                    }, 1000);
                } else if (timeLeft === 0 && isActive) {
                    setIsActive(false);
                    if (mode === 'focus') {
                        setCycle(c => c + 1);
                        setDecorations(prev => [...prev, { id: Date.now(), content: DECORATION_ITEMS[Math.floor(Math.random() * DECORATION_ITEMS.length)], x: 20 + Math.random() * 60, y: 20 + Math.random() * 60 }, { id: Date.now() + 1, type: 'lily', content: 'lily', x: 50 + (Math.random() * 20 - 10), y: 50 + (Math.random() * 20 - 10) }]);
                        setModalMessage({ title: "Good job, kitten!", text: "You did amazing! üñ§ Here is a treat for you. Take a well-deserved break.", button: "Start Break", nextMode: "break" });
                        setFlowerProgress(100); 
                    } else {
                        setModalMessage({ title: "Break's Over!", text: "Ready to conquer the world again? Keep going! üí™", button: "Start Focus", nextMode: "focus" });
                        setFlowerProgress(0);
                    }
                }
                return () => clearInterval(interval);
            }, [isActive, timeLeft, mode, focusTime]);

            const toggleTimer = () => setIsActive(!isActive);
            const resetTimer = () => { setIsActive(false); setTimeLeft(mode === 'focus' ? focusTime * 60 : breakTime * 60); if (mode === 'focus') setFlowerProgress(0); };
            const switchMode = (newMode) => { setMode(newMode); setIsActive(false); setTimeLeft(newMode === 'focus' ? focusTime * 60 : breakTime * 60); if (newMode === 'focus') setFlowerProgress(0); };
            const updateTimes = (newFocus, newBreak) => { const f = parseInt(newFocus) || 25; const b = parseInt(newBreak) || 5; setFocusTime(f); setBreakTime(b); if (!isActive) { setTimeLeft(mode === 'focus' ? f * 60 : b * 60); } };
            const quickSet = (f, b) => { updateTimes(f, b); if (!isActive) { setTimeLeft(mode === 'focus' ? f * 60 : b * 60); } }
            const handlePointerDown = (e, id) => { e.preventDefault(); setActiveDrag({ id }); };
            const onContainerMove = (e) => { if (!activeDrag || !containerRef.current) return; e.preventDefault(); const rect = containerRef.current.getBoundingClientRect(); const clientX = e.touches ? e.touches[0].clientX : e.clientX; const clientY = e.touches ? e.touches[0].clientY : e.clientY; const xPct = ((clientX - rect.left) / rect.width) * 100; const yPct = ((clientY - rect.top) / rect.height) * 100; setDecorations(prev => prev.map(d => d.id === activeDrag.id ? { ...d, x: Math.min(95, Math.max(5, xPct)), y: Math.min(95, Math.max(5, yPct)) } : d )); };
            const onContainerUp = () => { setActiveDrag(null); };
            const formatTime = (seconds) => { const mins = Math.floor(seconds / 60); const secs = seconds % 60; return `${mins}:${secs < 10 ? '0' : ''}${secs}`; };
            const handleModalClose = () => { if (modalMessage.nextMode) { switchMode(modalMessage.nextMode); } setModalMessage(null); }

            return (
                <div className="h-full w-full flex flex-col relative z-10 pb-20 pt-4" onMouseMove={onContainerMove} onTouchMove={onContainerMove} onMouseUp={onContainerUp} onTouchEnd={onContainerUp} ref={containerRef}>
                    {modalMessage && ( <div className="absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in px-4"> <div className="bg-slate-800 border-2 border-pink-500 rounded-xl p-6 max-w-sm w-full text-center shadow-2xl"> <h3 className="text-2xl font-bold text-pink-400 mb-2">{modalMessage.title}</h3> <p className="text-slate-300 mb-6">{modalMessage.text}</p> <button onClick={handleModalClose} className="px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-full font-bold transition-all transform hover:scale-105"> {modalMessage.button} </button> </div> </div> )}
                    <div className="p-2 text-center z-10 flex flex-col items-center w-full">
                        {isEditing && ( <div className="bg-slate-800/90 p-4 rounded-xl mb-4 border border-slate-700 w-full max-w-xs animate-in slide-in-from-top-2"> <div className="flex gap-2 mb-4 justify-center"> <div className="flex flex-col"> <label className="text-xs text-slate-400 mb-1">Focus (min)</label> <input type="number" value={focusTime} onChange={(e) => updateTimes(e.target.value, breakTime)} className="bg-slate-900 border border-slate-600 rounded p-2 w-20 text-center text-white" /> </div> <div className="flex flex-col"> <label className="text-xs text-slate-400 mb-1">Break (min)</label> <input type="number" value={breakTime} onChange={(e) => updateTimes(focusTime, e.target.value)} className="bg-slate-900 border border-slate-600 rounded p-2 w-20 text-center text-white" /> </div> </div> <div className="flex gap-2 justify-center text-xs"> <button onClick={() => quickSet(25, 5)} className="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded">25/5</button> <button onClick={() => quickSet(50, 10)} className="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded">50/10</button> <button onClick={() => quickSet(60, 15)} className="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded">60/15</button> </div> </div> )}
                        <div className="flex justify-center gap-2 mb-4"> <button onClick={() => switchMode('focus')} className={`px-4 py-1 rounded-full text-sm font-bold transition-colors ${mode === 'focus' ? 'bg-pink-600 text-white' : 'bg-slate-800 text-slate-400'}`}>Focus</button> <button onClick={() => switchMode('break')} className={`px-4 py-1 rounded-full text-sm font-bold transition-colors ${mode === 'break' ? 'bg-green-600 text-white' : 'bg-slate-800 text-slate-400'}`}>Break</button> </div>
                        {mode === 'focus' && !isEditing && <StargazerLily progress={flowerProgress} />}
                        <div className="text-5xl font-mono font-bold text-white mb-4 tracking-wider drop-shadow-lg"> {formatTime(timeLeft)} </div>
                        <div className="flex justify-center gap-4"> <button onClick={toggleTimer} className="w-14 h-14 bg-white text-black rounded-full flex items-center justify-center hover:bg-pink-100 transition-colors shadow-lg"> {isActive ? <Pause /> : <Play />} </button> <button onClick={resetTimer} className="w-14 h-14 bg-slate-800 text-slate-300 rounded-full flex items-center justify-center hover:bg-slate-700 transition-colors shadow-lg"> <RefreshCw /> </button> </div>
                        <div className="mt-2 text-xs text-slate-500"> Sessions Completed: {cycle} </div>
                    </div>
                    <div className="flex-1 relative bg-slate-800/50 m-4 rounded-xl border-2 border-slate-700 shadow-inner overflow-hidden max-w-2xl w-full mx-auto mb-20">
                        <div className="absolute inset-0 pointer-events-none opacity-10 flex items-center justify-center text-8xl"> üìö </div>
                        <div className="absolute bottom-2 left-0 right-0 text-center text-xs text-slate-500 pointer-events-none"> Drag items to decorate your space </div>
                        {decorations.map(deco => ( <div key={deco.id} className="absolute text-3xl cursor-grab active:cursor-grabbing hover:scale-125 transition-transform select-none" style={{ left: `${deco.x}%`, top: `${deco.y}%`, transform: 'translate(-50%, -50%)' }} onMouseDown={(e) => handlePointerDown(e, deco.id)} onTouchStart={(e) => handlePointerDown(e, deco.id)}> {deco.type === 'lily' ? ( <div style={{ width: '60px', height: '60px' }}> <StargazerLily progress={100} /> </div> ) : ( deco.content )} </div> ))}
                    </div>
                </div>
            );
        };

        // --- PAGE: STARS ---
        const ConstellationIllustration = ({ title, icon, data }) => {
            const hasRealData = !!data;
            const seed = title.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            const random = (offset = 0) => { const x = Math.sin(seed + offset) * 10000; return x - Math.floor(x); };
            let stars = [], lines = [];
            
            if (hasRealData) { 
                if (data.s && data.l) {
                    // New compressed format
                    stars = data.s.map(d => ({ x: d[0], y: d[1], size: d[2] || 3 }));
                    lines = data.l.map(d => ({ 
                        x1: stars[d[0]].x, y1: stars[d[0]].y, 
                        x2: stars[d[1]].x, y2: stars[d[1]].y 
                    }));
                } else {
                    // Legacy format
                    stars = data.stars; lines = data.lines; 
                }
            } else { 
                const starCount = 5 + Math.floor(random(1) * 5); 
                for(let i=0; i<starCount; i++) stars.push({ x: 15 + random(i * 2) * 70, y: 15 + random(i * 2 + 1) * 70, size: 2 + random(i * 3) * 2 }); 
                const sortedStars = [...stars].sort((a,b) => a.x - b.x); 
                for(let i=0; i<sortedStars.length-1; i++) lines.push({ x1: sortedStars[i].x, y1: sortedStars[i].y, x2: sortedStars[i+1].x, y2: sortedStars[i+1].y }); 
                stars = sortedStars; 
            }
            return (
                <div className="w-full h-64 bg-slate-950 rounded-2xl relative overflow-hidden mb-6 border-2 border-slate-700 shadow-inner group">
                    <div className="absolute inset-0 opacity-40 transition-opacity duration-1000" style={{ background: `radial-gradient(circle at ${random(10)*100}% ${random(11)*100}%, rgba(147, 51, 234, 0.3), transparent 60%), radial-gradient(circle at ${random(12)*100}% ${random(13)*100}%, rgba(236, 72, 153, 0.2), transparent 50%)` }} />
                    <div className="absolute inset-0 flex items-center justify-center opacity-10 pointer-events-none select-none grayscale contrast-150 transform scale-150 group-hover:scale-125 transition-transform duration-1000"> <span className="text-9xl filter blur-sm">{icon}</span> </div>
                    <svg className="w-full h-full absolute inset-0 p-4 pointer-events-none"> {lines.map((line, i) => ( <line key={i} x1={`${line.x1}%`} y1={`${line.y1}%`} x2={`${line.x2}%`} y2={`${line.y2}%`} stroke="rgba(255,255,255,0.4)" strokeWidth="1.5" strokeDasharray="5,5" className="animate-pulse" style={{ animationDuration: '3s' }} /> ))} {stars.map((s, i) => ( <circle key={i} cx={`${s.x}%`} cy={`${s.y}%`} r={s.size || (3 + random(i)*2)} fill="white" className="drop-shadow-[0_0_4px_rgba(255,255,255,0.8)]"> <animate attributeName="opacity" values="0.5;1;0.5" dur={`${2 + random(i)}s`} repeatCount="indefinite" /> </circle> ))} </svg>
                    <div className="absolute bottom-2 right-4 text-xs text-slate-500 font-mono opacity-50"> {hasRealData ? "ASTRONOMICAL DATA" : `ARTISTIC REP. FIG. ${seed % 100}`} </div>
                </div>
            )
        }

        const StarsPage = () => {
            const [activeConstellation, setActiveConstellation] = useState(null);
            const [currentTracks, setCurrentTracks] = useState([]);
            const [currentConstellations, setCurrentConstellations] = useState([]);
            const MUSIC_POOL = [
                // My Teenage Post-Wave Greek Pulp-Pop Wet Dreams
                "70LpDqsreV4MtlQzyyV87G", "5Od7Y3ihqhynfNBL10GS1V", "7jRLjRTSbOMmrkFiL6YyIh", "3D6VnVquICXOGIardkqCNV", "0xWbkwwk9PYq7KbhUqGTrn",
                "76eEvX5DMXKO0f4jH3mc6I", "1dURIHSKeONv5W5qlxfhJM", "7cTVP6Y736smxdqnsKILng", "1nwSyvxZe3CdPgVrtBkRpj", "2go9bn0N7cg7ZHBpdO30xP",
                "1DlunM8uvc4IDwsh7TPkAh", "4CgMAGfaMycuMBq7lBdYW8", "1nmDqfjWySD2uG82mxmQET", "7hBO6if1MEvLhs1nLQXQbc", "3gFHt0xjK283HOtqIWj7Q1",
                "4VV3S1Ywd5cqIzAVJGoypV", "6XeFd9KCGi7zz5U9KHqCyx", "6B8rz7mXTeAUMN5kzxDU95", "6HuvjKKWtXd8zWs0yiXwuo", "6haoMKj0wLTPxs3TbEAZHR",
                "5o6iooyCPV4ltS7V2xYj6A", "4frb4uRI5w0mRzcnZfPARr", "2V08zd3Ebi0luBDJ5vhveh", "3sjnNxHbmCKmpwL5lnrGEN", "6noTmxZ2U5rPNCB7gxvKRc",
                "6Q1UWA7EZ2QxCjZ6FSRdD1", "26fLnUK269kccIflMSApka", "4onFKWXE6krAYMpIC058P1", "6J4BeGRnLW7xxO00hxnXHP", "68f4Lw58gbEkNxCF8L8F3B",
                "3XHskjrUDc3Wp1ncftKLjz", "1cRAkR5GfTQRPtsLNzuFhN", "0t2AN6xx25AkNLRc1JGrNH", "2y07NHwK6ZLMKuNYzVCeYm", "1f6jUQIR1kQD89n5gAbpYa",
                "7zzFb0dYTjKNNP39h7Ke8I", "38dKbjLOv51Nq4HNX0l8TW", "606vxZ5VVTFrvYt6CPUDLA", "4tye7Iy4kqSvTs5msJZQHq", "1rAPmrKqRTWaJdJeISbauf",
                "1XEBbdQuFXvog7MDao0yfk", "63YDJGvdHF64nocFR9z0oo", "73G35udHDcqCfP2lHCbaps", "52DnEDijuLyneGxkRPWaiy", "4XBab31fUywZVGMlA6PhAN",
                "7aHgIFaRWmBMXf8VRhJWy0", "3Zmkfu04oT5051b0g6pxSO", "63YHH6P1z3wbzCSTJIDtjo", "0swqfhjHd95VJXZY6rgjLT", "0elApiEQu6nMrE5BJOQXgo",
                "7AscoYDsOUwBBe5MwAxebQ", "58uOwQN9E9u6pcAWigOh2o", "0n2AGgoSBJjpXs5ZxNr6YR", "0Zxjq1RaNGAywOKaTBmw4S", "4PxHSsckhcveay6LMJ3AjX",
                "47msO5H584HjMuAGmqMJtV", "4PiIAUjanOJNOgSDdxjJ4c", "5A8QwIwbTClJMXpjy0n13M", "63orgCfmTpRHa4hHRbpipR", "28cS2y6vA6kQc9OGleGwx2",
                "7rcE4WPQmLvZbhkCUIYCZF", "6j6INJNCPHB2WS0ZePXKXA", "7bPsKIYOYjJtPeIsg3nW2P", "2L9pZEVUFyGHNtx638XHo2", "6pTyolJMLQoQm0qaGIxc2X",
                "0htdTkO5n2La5TtwVYQpRT", "67GEyhXjuE4CksP16OIu7p", "6OanicNL1bB32VgK0nC8nh", "58uf6igKC5O5VAa9iVxiKh", "74fP9YcpDOaOucpsAGoWFH",
                "5687kNTXLpqSUUkqk31blJ", "6y3ZDbcQstwIi6hhxOHXNv", "5qi2qBMfMEalAwfyw4DekD", "0u4kfySAnhPiqY17hCRNEN", "1gO9UCn7BFNesoFTA774nn",
                "0jqNqKLfG6dpkh82ZNZLc8", "4r5W2iwnQpcDzEu8LCEx7B", "48LU6CLLvImvsVu0jJjC7l", "51TBGuofiTBcWgTEzQvqKG", "4XExjGrZX6VkAALwwaisde",
                "0hTLC3b0fjYZUX8Nw6pGPE", "3xDEza9vTxqINGvvz8V6cO", "6NqWO8hGsntCx702kT2idK", "4kevlqV0BxC2bJ3cg4TICa", "1YRGhYufVIhxnXxzC1mG5x",
                "7cGLw6CZb2E9paZysiRtwG", "3Nf2wpCH6TeLdZ4eG5XQ7f", "7wLKS7SzdTgUL0dsBmfdWu", "6NEE9pAg8KOumgx2Qiy7Kw", "7jQOlN1vGR5rBOck2LUBjX",
                "3rTlDFp5OWIcmDzbihtsAf", "7oHIaZjc2JWCyQmpbJ8f3z", "0ipMg1ovxucAQpIlB5KFnv", "3s3QL5SzcKVHq0B8iBcoZo", "5gF9RD3AKE8pf1sXcRz68W",
                "6JkCzA3arBZKLhnCaUdoDg", "7s9mt14taxUeum4lhUWL43", "3ZXdGIqQOQYGETZRlUJTdv", "1cEtA13aEaEh5QAncWvFfJ", "4NMn560HDiG0v5hGqfB3aS",
                "41zV1pjj4RJPBTV1nqq0ee", "1uYyMqV8K4DOUKYrqyaoH5", "4LCiQW8vfq3A9R9sA8U3hN", "2dOPsvCkjyTdLeqkQdgfTR", "7xfI8eKbhWk9O8vwVnqnTa",
                "15b7vmjYfAPGL3DuSMBUI1", "4H5tcU13VR7ug5E4MX8SKP", "1OrvTgVJ34forXXa7A8IkG", "4FWrrmLMLeJ1DX8awicSUm", "42wkMrkIqX4pYIGnTW70kG",
                "6ucNZBkwkPmw8OHiv5L7P4", "7Gi8jg3h2Ac0gMetpQUXmh", "4yhhJkWb4oqTYRCKAEACMr", "3hatHrJ64kkVS2VH47pPKR", "3RKxM0q7IGsudpC4VT4xTv",
                "0yt0PDjRd1CfDXnw3oeXtS", "17virskSxaqh5UKk3QonW4",
    
                // (bedroom) pop for the elite
                "0H2zA6m04MUsu4mX2KecNr", "6XHikJpK06NoXaFwkH4tPL", "0R3TWpoxAhT3HDXM7tpRzS", "4HbeGjbt7u3pvwDk1vN7P0", "0B6oBwvkyLptGexpwJVz7c",
                "2blV6tohiJoieVNtlL0yU4", "3zjvduyGhyBKYCVHGn6E74", "0gdWSthwNMJ4TPVya8b0bh", "36jDABK9TQixIZOZylPy04", "5aqslHfDoGviK5vRwyQQgd",
                "50auDM0fjPvcdxvc4i5nOj", "6jp0JIuzSbKCB26bg1iPgp", "5GbVzc6Ex5LYlLJqzRQhuy", "2ZWlPOoWh0626oTaHrnl2a", "0UVzM2GkqTTf57G6Wj05UL",
                "2HUugUuZW0e4N7ne9YJScc", "68KdvPllp9Pug8ZG6AByFY", "5x9r0HaFznxQ32J2JZFhub", "3MMLO6TUL07tze9IXud0Vc", "44ZKnfWEkp7wPs035j4Tua",
                "6pxElwU80zhjbCC77Vn8EI", "6Jl3ZOX6MUOlyoUc721bsX", "1FWoak0OgTq1jrYfRKfXsj", "7mjOxXnZYbGtgjyX0hqaLs", "4hqTguGFl0NWgFIxBppbKQ",
                "4zvHZWOGyL7WcmqHOgtGCW", "1XrSjpNe49IiygZfzb74pk", "2dIeraguJ8SoHDqXfSZelZ", "75TDPu9k7Yv3IovdYaNCwk", "2QjOHCTQ1Jl3zawyYOpxh6",
                "4EpZ4eYuZOwPSSwyqpdHnJ", "5EYi2rH4LYs6M21ZLOyQTx", "20EIvCTkNuaFU0vB6NG8eo", "0nMqu5vN44GNv8UOQxmBJK", "3AyuigFWbuirWHvidbMz8O",
                "6atVS7UZBxoyJkkteM62u5", "4HpFU6eMThgW6Cael5AwYy", "0S3BtG3i5tkQmehJhIhHF3", "7AfZIW6yXC4MzElfFmqa9m", "7i5I4h7r2vkI2r9tgKjy0x",
                "0DltZY7z8YvuDBSAbsIgPc", "0AduS1e4FWNLdnUNmMwQQd", "7j59MN6vDM9lrvQ0iGhqaa", "6JaPUxse2AsI0df7XXvetF", "5U8hidWugxHXvh1AzZYwKF",
                "3s9YtjSkxeeriM92mASyoO", "1B2zrooBJ6Rc8NIUuS3VDh", "1xRXJVVDvlvFJxuLRvHDpF", "0B4U9FT1WaFwUiiCPOAak7", "06qUr4CXtG4k3gUurF4tu6",
                "2DoO0sn4SbUrz7Uay9ACTM", "5eAkSNmHLmydvGAvcV4TnM", "2joEpsXflccZD0ZwKEdz5m", "30jui3PqevssdIVpjEWM38", "1MaDw1BQ797k8j7xXnH486",
                "4UexrxBMEyacoNwOvmx6XQ", "7lKN7pik3CelVWHWGp6DfB", "4lAfXpZKFDEudiEzLB9uHm", "2fGRJzoiYJYAzlQAyBONMb", "2RjsAYVbdZPISqnsWd3Hup",
                "6RiiSy9GzSwiyDEJDiMuKe", "3A0cAzFKPefBCz7Z02UnnO", "6BrfgV35h3NfTtIdMqhmFQ", "6Qvwt9H76n1FfWyw5aT6JJ", "3vkCueOmm7xQDoJ17W1Pm3",
                "6A7d2QgbSga495NJdkEY2A", "0OblxGfTmtALWjImtm7DFd", "62tGzw9OJOwDcjPBnMPCuj", "0RvES3Nq1VAIAdC4x8LfQT", "0OrxUBA5JghHjUarBa2Vjz",
                "05QGaQnoBuda27vXxpuiRU", "1EZYmas3jh7aUKqCF9EI5A", "4Z2zWAUN9YVxHkZXS7s1KE", "3Zq2naJ92TwUhC32Iov3a6", "4hm33jVolpa22nzhlY72jD",
                "3TFNxpIwIzMi3jsMRy9GVZ", "0bXdmDpRkYeub0OKISlYpH", "7MBSbBrx0TvBYyKEcpGcJb", "35S3sMjHlF8v2EmxQuDF7z", "36QuWvqoTl8UN1NZv0Q8VP",
                "1wSXSFmjyldwfx0JOSHlEa", "1ixXNc8iCkRniJhICf9xpy", "0YdIIMb2MHuxoUudkAY9gS", "5CZEan1P5qmhfXFib8ohGj", "0zpk9Uz5C8DshxSYbMcwcH",
                "1MwPvniPtqPkXwtQDFiJdb", "7jdNolHsTx18e2QVoDm1uf", "41HyMiZSBLGlfopnDE7Ppc", "0KyAGiNGUytG5JLxJu4F6l", "4NhH5IXSqjQgmQOm189Dij",
                "3MklLppNRhuAupVGO3uNW2", "0iMSUfh4oQplV5OrmrlIbm", "2JKtCvtxP47fOMYi0BjMoY", "6ZqNoqtQvRP3WDHrna12xT", "6ZCGKyXcGbYc6tdP6unPVY",
                "0HAqq2GcQKyi3s87GuN7jU", "0XvoMOI25j4wODyk8nuANS", "11sfRkHdvsop5DdHVmGpt1", "0dpusM1gM6ULx0QvjJctbT", "1SyJuJfFyoAxuZMaTbwHJW",
                "2lOTK5uAzQ4OmRPXo2oAFX", "11HRSkKS5nDZB0921Kwne1", "4LQm0wh5zH07mOOQxI0QOK", "2HcMkGeghyXdJRT1g85u0t", "6R2YSITVeRTFwDczaxSnQS",
                "4k6Uh1HXdhtusDW5y8Gbvy", "4DQNdeDEnbJIckoZ8XLg7G", "2ZZ0ITwRqitCvddi2CGfgq", "0a7RXqXcCSNeo7WxynoNka",
    
                // Tosa kalokairia
                "5cERWuNRghbSmXyv4pGX5v", "5OZUVTVsRKOxBCxeW9P2Dy", "4du2vBLWwPMxRncBklEk7u", "1mPlvRINnuodMQdS7AZ6Jr", "158mRIBWD3DqkZsa7uXvMQ",
                "0U4414APE9VKvPhstvkpYP", "1YnbnWAQfuG30q5tWTpKVA", "0Y12sZ2BwHHZZSAcaU2Bbr", "5uuLnmCZfvaeJI4XAyWnCC", "3czISDpFF7J9HGgn9WZoBy",
                "2zwmtC9IBxuOHsrr7sK3md", "1woQ49dajnONIc9QVPs62u", "0GMOIRfddB0l0rxDmm6YJ8", "5rs7fgwffE0dSR4JYXIQbu", "7s3TCY7WueF1khSppW7iF1",
                "4ZN478bY80gFhyA6PmmPFD", "40Wx97tCqWvzgMBSQe0prL", "76ys7PRbxO9JTmMAPDQkSB", "7CrrRzL6C1U46cBHBHcqyY", "43ed7eVZCyV4glwgkuCr8e",
                "0iNKXpQbTbOLTqbS4PLxwR", "44HedZNCyNN2q3mMNNky9i", "2NtJ0frveSvgeSeT7ZqNuF", "6xgNbfR28nXkxXTdJvElYE", "0sHAUfT0764slsYmzHuAyR",
                "0zHQTm3IH7kDjhMCdS5VcO", "10ynytzcmTvB6aXOg6AJ4w", "3soXmrdocXIXXJSGlm8vjT", "0we8xXKjtmpi3hELJxwcbL", "2QSdQSAWWWuYlDMvxNrPIz",
                "3DtOgnU3dAFMJbrLzM0E61", "3Hzh6CNHk7X3WX9masTX2p", "53XiyakMLDTrpJrHn17IEN", "16DUU2ZOjRcDU6xtAoywtP", "5A8DxvVWRk8oJVmjOugilP",
                "42zGu2xvKqcTFgOGbcNfwU", "4PnCiR4K75X5VoShGoyetB", "5ZSImHC2E9obW7ftX5XPLN", "5mkLg5QjOqvU7EDIRIm0Fp", "3kSVR6vHwOVHwZqxES3kcp",
                "00DAwd8VddIe9BTYeSTlde", "2yhcOWQKHS9KRUja2w68fI", "3uSeyudHeffO0ae3sNhkSu", "2MB5r0nZQbk0RfOxoyvo7Y", "0LuqYKTf700ss14LPOsH4J",
                "5F58MuwG5vpPNp8KbGrl48", "6FntxZMrTrHFr6u7FwIXEk", "6HVEqavdH36tV30gAC1kfB", "6DP31WTLrD8Bvsxy2VV7cs", "1SFdIW0U0GWe55nL3W0pY7",
                "1X5PAeDiHUHFWo19kyEbmy", "65KGgcDQ9UvjnvWdo8HL8y", "68U8WzzmDkc9OUG12I7GAB", "7ueHwvftYc7dp2ggogXYqA", "6YyKswKpjMVTAkRkRb2gJp",
                "2KCSHXnrhzVLxfcCEfOlv1", "1l15uZKtQOsGXzQmiZjQa8", "1p5iUGtUugdDVh80xUf5Af", "7y2iFrKyiTaE9nVh45CzYE", "2OJL9imXUV7Ny7pCAGGWwg",
                "4JNi5l2KTYlZrnvXG2scSX", "3KNYYfOQdlXyYQMod3vknt", "647E9u5Vix5D7dxbUZujNs", "598nHadCHzRomN2pbX4zYs", "2YutvKgc9xPBLzN3YSUKu2",
    
                // Indie Summer Drive
                "4zGub7d71FopcEXaLKqxcU", "6cNkgWg7NO8XebRZTrIcom", "4a9fW33mYR8LhXBOLUhbfF", "5h9hkYIBWTZYFRmF6Iz1gt", "3xnM0WCRJKk4Iz49rkG5OC",
                "1FtVQfBKVOmn1SlqujsnJR", "6gKjueO32MnERRo04gpJ8v", "3IznIgmXtrUaoPWpQTy5jB", "3XqbLsVmAwvTJqW6NKopg0", "28nmbejPbeXDqYCWGVg4X7",
                "4l38jp3bDPcI5avo9ov482", "3WSaGTmm67vd3stVi0Zu9D", "7dTPJ3wGBcLzAaMhJfY7Qd", "0HNYFFOwID6HGSqy5xr4av", "5goeUvSplsnWCmkUFmFDgt",
                "6c8pVKT7KBUzp6fYNDFqlL",
    
                // Mew person, same old mewstakes
                "52ojopYMUzeNcudsoz7O9D", "49ASnsS0LENGokjQAdP3VW", "2X485T9Z5Ly0xyaghN73ed", "0mO6oS60RST2sWmN2FKknP", "7H7NyZ3G075GqPx2evsfeb",
                "7s5VQqrjBtrBgZL4pEa46S", "1aXV8GrmQLvgoFtBPERP7E", "4SgcE7RxpK3ydWrjoAQH1K", "3Yub3anoLj8w58TVpEXUJv", "72cGBEqu7RitIOoACXYjfR",
                "6MClJYRD7op0WvDuBGWsMn", "3FqcpEZ7dzggkhz7cOfC1p", "6QeYSvYqYUsfBzsApbjDHO", "0pJTrMWCiR0TuJ5FApIqrz",
    
                // Never really needed Duolingo premium
                "2vlkTkPqdATznKHu9gD2c1", "2YuySJd7C2aoBarBP8OvzR", "6oDXwSPWcp7KT2B3funF8y", "5Dqfw7Qiz6spw2xcl3rfkt", "3Bw99kE5w9R5gSVFhxahcB",
                "1cyRoWGazsa8Vr5qlDfvPP", "2dGXDL8P7ibb3uPdQ4ybuM", "6st8aj6PmtqGctnLAat95M", "7kgYFXWRmgCH3NxxT6rWR4", "6MqqJ0OVjaYeiWUSMOAK8x",
                "5TJJTBZWEa6zc6CXnjsVJZ", "2cSRuejq6DU9U6OkSmUw17", "4jmLj7bALZTQoe93dT623W", "5G9LvzXcBoIBXOd2jzdJTs", "4O1etEzE7zc8ZO80KNd5GZ",
                "784VjdNkpXhFV0RHquzsi2", "2YTxJzuw6szzgsstEo80Dh", "14qNHvX8h6HoynFuV0RxWS", "5HaTv6nHDSVO1LqjwoP7RA", "7KAXxQfUG4kzRivltbD1UY",
                "67yZsFQIMghAAl0V3h9lES", "12YAZNNm2OuSgDBKjFQcNm", "7ET6gmg1EJe3e9JI3xFMxk", "58lQsFCu6wlgDvOI0MjMmu", "3YB9cvd668HXBEq8rbBW8P",
                "2mSvt89wTd99uETCSlePH2", "4A48ckONJNoXU5smWT9CeG", "5BBK1WoaiD3b3sJ2UysLuM", "22kGOe1POaqkSQhGtvzbHx", "1o0ckFhbn9bEsbBrAa5oy5",
                "6602NMvb8ioqAjGKBi44rY", "4RUiaHW5J4yr1k0zioghJT", "6I5zS36y3vQnp9bis62OFy",
    
                // I miss your body's warmth
                "6K4t31amVTZDgR3sKmwUJJ", "3Ziys0cjD0QpGMDJydVlIv", "3ypyxNeykDGfupZCloqFVT", "5R0vCr5hXzmPl9ovBKqLXk", "3bXxr8pWeLXcPsfIQm3Uun",
                "53pVuKaVvfIuGiDrBtPjYD", "5687kNTXLpqSUUkqk31blJ", "3qUQnGoQUzJoLQKwnQucSh", "2FfEHEBsbh3NFcZazN0mll", "4r5W2iwnQpcDzEu8LCEx7B",
                "0KoU7qwnZZFGFZ1QdHDaRR", "63ABAnFKJCp28TAyqf2cGL", "4ec0GQNlVroHo3Jhjp5FA6", "16CpQWGHO4PWBEoYbtrlda", "0LqZuRAroDVnV6LjDUGap1",
                "2EPuv7zyLpFqReJoYrIFzm", "41KiUY33B3lXF4GETuhIPt", "0w1c9M3a9WCsxmBs3UkqlA", "6qSt1UvGaxHUzzV244HpmO", "5Hg1m5uhSPL75ejQgPOmyc",
                "01iiEi9h8CQGUN2K1xBbTj",
    
                // Your Top Songs 2025
                "4fPjI40ElIwJQ4DJJxSCOe", "6ZdAsADC9LIICvsVRuGWbZ", "4S4QJfBGGrC8jRIjJHf1Ka", "6bIPHR8AJG5HAcn9oF21Ma", "2rrq3SGYxk90xLx5fMmPhZ",
                "0widrZ6KVNuIPhbM1rWPDR", "2QPOYxo6k95XvvptEFcf4M", "2nv9JnsrmTiVVuU1M1Y0gE", "62zFcDLa1CjCY9yp6VO4ga", "4neZmyJ43dCSOIj6VHUoMn",
                "3i4xZSH1kTLE22TUvUFMYo", "0dOUOfrPxsCXCcCYZWHSTN", "7fax7NlxOq2X9kMZw8QLE2", "1UYj8qTWjneZJDVjUMwMub", "7FAh3mXDd7Oyo5RmE2FbsR",
                "3ZDH5g8ozIUMdjqONzG6tR", "1yltcCzaJXDpbTZmI3s1je", "3TuWrfS30De3P03yITmDcL", "2ji5Ff76AxmJyBG0Z6XgYl", "0QArETwcN3KLawegUPmusT",
                "7h2nmmoWDi2UpfYKLKWLYB", "204t5SErksNRHRhU52g5JF",
    
                // kwnna + Banos
                "3aLClcAppX3b6pCHHFn8nQ", "1OrvTgVJ34forXXa7A8IkG", "28SH8v8kBpdce0mvnI7bST", "3gkNbqRxVlEen5iR6bao5J", "3YiFC5fkXFGqAxMueZ2sqo",
                "3nIpscPqzbcZyePbF51D9Z", "6OsywAe4ov97KeA0QJv8UG", "4LFenKAaX95Pq6l5kKuw3A", "1s9KXtm2FMA1HeXuPkgpxD", "5VUaEzmMVrs4mPW9a5lTY3",
                "7xauJZr1AwExzTiC6e4gsl", "00CkIh1jiX8K9iRlV1afNF", "65GkKi3dAwRUpPZI0IogFZ", "1NZs6n6hl8UuMaX0UC0YTz", "1NXbNEAcPvY5G1xvfN57aA",
                "0ZNU020wNYvgW84iljPkPP", "1E2Ctz821hYVTfDjxQBRZh", "2rASRHHT4hnXIpv5IOcrVU", "1NZZveCjdyc6YFX7Sz8mCL", "7tDMzb6OiWSvjkN1FkpxiB",
                "1YiubAOu9T8ryoZ0Hu1woa", "7rgTr97Ob29FuuKCHqB7a4", "7eq0a7HISgTaLbMLlJU6mA", "6EOCIUxm6K4OvqLQSf52GK", "2kz837aCEmpdo4xVDEG2sv",
                "6Hwif22a9kokAI7V7Zwmxj", "1NmSGCAQ1Om8SveCfLnx7X", "2XfkzaOcEcvjm1rB3nYqEo", "4H6Gr260ly6OXQeZ0tdpHr", "62HQz5g66bRVsyTcPt2kXD",
                "0LIXN2xD9qlHMYo6OA5abR", "1VYv1xH7yUl0b43UVR6yA9", "2HDazOaZrzKcW6g4PPCFFd", "0EiWvy2pfU8sul3wG6PiYz", "0puMe2UGP0whQDeJaTraeX",
                "2uurVIp2d6PlXkPvgXSjSX", "3i6qNxyVgIdUZTTi5m25EM", "6ADSaE87h8Y3lccZlBJdXH"
            ];
            
            // THE 44 MAJOR CONSTELLATIONS
            const CONSTELLATIONS_DB = [
                { 
                    id: 'and', icon: 'üë∏', title: 'Andromeda', 
                    text: 'The Chained Princess. Daughter of Cepheus and Cassiopeia, saved by Perseus from the sea monster Cetus.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 40¬∞S', time: '9 PM (November)' },
                    data: { s: [[80,20], [65,35], [50,50], [35,65], [35,35]], l: [[0,1], [1,2], [2,3]] } 
                },
                { 
                    id: 'aql', icon: 'ü¶Ö', title: 'Aquila', 
                    text: 'The Eagle. The bird that carried Zeus\'s thunderbolts and abducted Ganymede.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 75¬∞S', time: '9 PM (August)' },
                    data: { s: [[50,20,5], [20,50], [80,50], [50,80]], l: [[0,1], [0,2], [1,3], [2,3], [0,3]] } 
                },
                { 
                    id: 'aqr', icon: '‚ôí', title: 'Aquarius', 
                    text: 'The Water Bearer. Ganymede pouring water (the nectar of the gods) from a jar.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '65¬∞N to 90¬∞S', time: '9 PM (October)' },
                    data: { s: [[30,20], [50,20], [40,40], [20,60], [60,60], [50,80], [70,80]], l: [[0,1], [1,2], [2,0], [2,3], [2,4], [4,5], [4,6]] } 
                },
                { 
                    id: 'ara', icon: '‚õ©Ô∏è', title: 'Ara', 
                    text: 'The Altar. The burning altar where the gods swore allegiance before battling the Titans.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '25¬∞N to 90¬∞S', time: '9 PM (July)' },
                    data: { s: [[30,20], [70,20], [30,60], [70,60], [50,40,4], [50,80]], l: [[0,2], [1,3], [0,1], [2,3], [4,5]] } 
                },
                { 
                    id: 'ari', icon: '‚ôà', title: 'Aries', 
                    text: 'The Ram. The golden ram that rescued Phrixus and Helle, whose fleece was sought by Jason.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 60¬∞S', time: '9 PM (December)' },
                    data: { s: [[20,60], [50,50], [80,40,5]], l: [[0,1], [1,2]] } 
                },
                { 
                    id: 'aur', icon: 'üßî', title: 'Auriga', 
                    text: 'The Charioteer. Often associated with Erichthonius of Athens, inventor of the quadriga.', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '90¬∞N to 40¬∞S', time: '9 PM (February)' },
                    data: { s: [[50,10,5], [20,40], [80,40], [30,80], [70,80]], l: [[0,1], [0,2], [1,3], [2,4], [3,4]] } 
                },
                { 
                    id: 'boo', icon: 'üç¶', title: 'Bo√∂tes', 
                    text: 'The Herdsman. The driver of the oxen (Ursa Major). Contains Arcturus, the bear guard.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 50¬∞S', time: '9 PM (June)' },
                    data: { s: [[50,90,5], [30,50], [70,50], [50,20]], l: [[0,1], [0,2], [1,3], [2,3]] } 
                },
                { 
                    id: 'cnc', icon: '‚ôã', title: 'Cancer', 
                    text: 'The Crab. Sent by Hera to distract Hercules during his fight with the Hydra.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 60¬∞S', time: '9 PM (March)' },
                    data: { s: [[50,50,4], [20,30], [80,30], [20,70], [80,70]], l: [[0,1], [0,2], [0,3], [0,4]] } 
                },
                { 
                    id: 'cvn', icon: 'üêï', title: 'Canes Venatici', 
                    text: 'The Hunting Dogs. Asterion and Chara, held on a leash by Bo√∂tes.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 40¬∞S', time: '9 PM (May)' },
                    data: { s: [[30,40], [70,60,4]], l: [[0,1]] } 
                },
                { 
                    id: 'cma', icon: 'üêï', title: 'Canis Major', 
                    text: 'The Great Dog. Orion\'s larger hunting dog, chasing the Hare (Lepus).', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '60¬∞N to 90¬∞S', time: '9 PM (February)' },
                    data: { s: [[50,30,6], [60,35], [70,60], [60,80], [30,70], [40,50]], l: [[0,1], [1,2], [2,3], [0,5], [5,4]] } 
                },
                { 
                    id: 'cmi', icon: 'üêï', title: 'Canis Minor', 
                    text: 'The Lesser Dog. Orion\'s smaller hunting dog.', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '90¬∞N to 75¬∞S', time: '9 PM (March)' },
                    data: { s: [[20,50], [80,50,5]], l: [[0,1]] } 
                },
                { 
                    id: 'cap', icon: '‚ôë', title: 'Capricornus', 
                    text: 'The Sea Goat. Often associated with Pan, who jumped into the Nile to escape Typhon.', 
                    visibility: { season: 'Autumn', hemisphere: 'Southern', lat: '60¬∞N to 90¬∞S', time: '9 PM (September)' },
                    data: { s: [[10,20], [30,40], [50,50], [80,20], [50,80]], l: [[0,1], [1,2], [2,3], [2,4]] } 
                },
                { 
                    id: 'car', icon: '‚õµ', title: 'Carina', 
                    text: 'The Keel. Part of the ship Argo Navis used by Jason and the Argonauts.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '20¬∞N to 90¬∞S', time: '9 PM (March)' },
                    data: { s: [[20,80,6], [30,60], [60,60], [80,50], [50,90]], l: [[0,1], [1,2], [2,3], [1,4]] } 
                },
                { 
                    id: 'cas', icon: 'üëë', title: 'Cassiopeia', 
                    text: 'The Queen. Vain queen of Aethiopia, punished to circle the pole star upside down.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 20¬∞S', time: '9 PM (November)' },
                    data: { s: [[10,30], [30,60], [50,40,4], [70,60], [90,30]], l: [[0,1], [1,2], [2,3], [3,4]] } 
                },
                { 
                    id: 'cen', icon: 'üêé', title: 'Centaurus', 
                    text: 'The Centaur. Often represents Chiron, the wise tutor of heroes.', 
                    visibility: { season: 'Spring', hemisphere: 'Southern', lat: '25¬∞N to 90¬∞S', time: '9 PM (May)' },
                    data: { s: [[20,70,5], [40,60,5], [50,30], [70,30], [60,50], [80,50], [50,80]], l: [[0,1], [1,4], [2,3], [2,4], [3,5], [4,6], [5,6]] } 
                },
                { 
                    id: 'cep', icon: 'üëë', title: 'Cepheus', 
                    text: 'The King. King of Aethiopia, husband of Cassiopeia and father of Andromeda.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 10¬∞S', time: '9 PM (October)' },
                    data: { s: [[50,10], [30,30], [70,30], [30,70], [70,70]], l: [[0,1], [0,2], [1,3], [2,4], [3,4]] } 
                },
                { 
                    id: 'cet', icon: 'üê≥', title: 'Cetus', 
                    text: 'The Sea Monster. Sent by Poseidon to devour Andromeda.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '70¬∞N to 90¬∞S', time: '9 PM (November)' },
                    data: { s: [[10,30], [30,40], [60,30], [80,20], [90,40], [80,50], [60,40], [40,80]], l: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [2,6], [1,7]] } 
                },
                { 
                    id: 'col', icon: 'üïäÔ∏è', title: 'Columba', 
                    text: 'The Dove. Noah\'s dove or the dove released by the Argonauts.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '45¬∞N to 90¬∞S', time: '9 PM (February)' },
                    data: { s: [[20,30], [50,50], [80,30], [50,70]], l: [[0,1], [1,2], [1,3]] } 
                },
                { 
                    id: 'cra', icon: 'üëë', title: 'Corona Australis', 
                    text: 'The Southern Crown. A wreath placed in the sky by Dionysus.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '40¬∞N to 90¬∞S', time: '9 PM (August)' },
                    data: { s: [[20,60], [35,50], [50,45], [65,50], [80,60]], l: [[0,1], [1,2], [2,3], [3,4]] } 
                },
                { 
                    id: 'crb', icon: 'üëë', title: 'Corona Borealis', 
                    text: 'The Northern Crown. The crown of Ariadne, given by Dionysus.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 50¬∞S', time: '9 PM (July)' },
                    data: { s: [[20,40], [35,50], [50,55,4], [65,50], [80,40]], l: [[0,1], [1,2], [2,3], [3,4]] } 
                },
                { 
                    id: 'crv', icon: 'üê¶', title: 'Corvus', 
                    text: 'The Crow. Sent by Apollo to fetch water, delayed by figs.', 
                    visibility: { season: 'Spring', hemisphere: 'Southern', lat: '60¬∞N to 90¬∞S', time: '9 PM (May)' },
                    data: { s: [[30,30], [70,30], [20,70], [80,70]], l: [[0,1], [1,3], [3,2], [2,0]] } 
                },
                { 
                    id: 'cru', icon: '‚úùÔ∏è', title: 'Crux', 
                    text: 'The Southern Cross. Smallest constellation, vital for navigation.', 
                    visibility: { season: 'Spring', hemisphere: 'Southern', lat: '20¬∞N to 90¬∞S', time: '9 PM (May)' },
                    data: { s: [[50,10], [50,90,5], [20,50], [80,40], [70,60]], l: [[0,1], [2,3]] } 
                },
                { 
                    id: 'cyg', icon: 'ü¶¢', title: 'Cygnus', 
                    text: 'The Swan. Often associated with Zeus in swan form or Orpheus.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 40¬∞S', time: '9 PM (September)' },
                    data: { s: [[50,10,4], [50,50], [50,90], [10,50], [90,50]], l: [[0,1], [1,2], [3,1], [1,4]] } 
                },
                { 
                    id: 'del', icon: 'üê¨', title: 'Delphinus', 
                    text: 'The Dolphin. Saved the poet Arion or carried Amphitrite to Poseidon.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 70¬∞S', time: '9 PM (September)' },
                    data: { s: [[40,20], [60,20], [70,40], [50,40], [30,40], [30,80]], l: [[0,1], [1,2], [2,3], [3,0], [3,4], [4,5]] } 
                },
                { 
                    id: 'dor', icon: 'üê†', title: 'Dorado', 
                    text: 'The Dolphinfish (Mahi-mahi). Home of the Large Magellanic Cloud.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '20¬∞N to 90¬∞S', time: '9 PM (January)' },
                    data: { s: [[50,20], [50,80], [30,50]], l: [[0,1], [1,2]] } 
                },
                { 
                    id: 'dra', icon: 'üêâ', title: 'Draco', 
                    text: 'The Dragon. Ladon, the dragon that guarded the golden apples.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 15¬∞S', time: '9 PM (July)' },
                    data: { s: [[80,20], [70,30], [60,20], [50,40], [40,30], [30,60], [20,80], [10,70], [30,90]], l: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [6,8], [7,8]] } 
                },
                { 
                    id: 'equ', icon: 'üê¥', title: 'Equuleus', 
                    text: 'The Little Horse. Celeris, foal of Pegasus, or Cyllarus.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 80¬∞S', time: '9 PM (September)' },
                    data: { s: [[40,40], [60,40], [50,60]], l: [[0,1], [1,2], [2,0]] } 
                },
                { 
                    id: 'eri', icon: 'üåä', title: 'Eridanus', 
                    text: 'The River. The celestial river (Po/Nile/Euphrates).', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '30¬∞N to 90¬∞S', time: '9 PM (December)' },
                    data: { s: [[10,10], [30,20], [20,40], [40,50], [30,70], [80,90,5]], l: [[0,1], [1,2], [2,3], [3,4], [4,5]] } 
                },
                { 
                    id: 'gem', icon: '‚ôä', title: 'Gemini', 
                    text: 'The Twins. Castor (mortal) and Pollux (immortal).', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '90¬∞N to 60¬∞S', time: '9 PM (February)' },
                    data: { s: [[30,20,4], [70,20,4], [30,80], [70,80], [30,50], [70,50]], l: [[0,4], [4,2], [1,5], [5,3], [0,1], [2,3]] } 
                },
                { 
                    id: 'her', icon: 'üí™', title: 'Hercules', 
                    text: 'The Hero. Greatest of Greek heroes, kneeling.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 50¬∞S', time: '9 PM (July)' },
                    data: { s: [[30,30], [70,30], [30,60], [70,60], [20,80], [80,80]], l: [[0,1], [1,3], [3,2], [2,0], [2,4], [3,5]] } 
                },
                { 
                    id: 'hya', icon: 'üêç', title: 'Hydra', 
                    text: 'The Water Snake. The multi-headed beast killed by Hercules.', 
                    visibility: { season: 'Spring', hemisphere: 'Southern', lat: '55¬∞N to 85¬∞S', time: '9 PM (April)' },
                    data: { s: [[10,40], [30,45], [50,50], [70,55], [90,60]], l: [[0,1], [1,2], [2,3], [3,4]] } 
                },
                { 
                    id: 'leo', icon: '‚ôå', title: 'Leo', 
                    text: 'The Lion. The Nemean Lion killed by Hercules.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 65¬∞S', time: '9 PM (April)' },
                    data: { s: [[70,30], [60,20], [45,25], [40,40,5], [20,50], [30,70], [60,65]], l: [[0,1], [1,2], [2,3], [3,0], [3,6], [6,5], [5,4], [4,3]] } 
                },
                { 
                    id: 'lep', icon: 'üê∞', title: 'Lepus', 
                    text: 'The Hare. Chased by Orion\'s dogs.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '60¬∞N to 90¬∞S', time: '9 PM (January)' },
                    data: { s: [[30,40], [70,40], [30,70], [70,70], [50,55]], l: [[0,2], [1,3], [0,4], [1,4], [2,3]] } 
                },
                { 
                    id: 'lib', icon: '‚ôé', title: 'Libra', 
                    text: 'The Scales. Scales of justice held by Astraea (Virgo).', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '65¬∞N to 90¬∞S', time: '9 PM (June)' },
                    data: { s: [[50,20], [20,50], [80,50], [50,80]], l: [[0,1], [0,2], [1,3], [2,3]] } 
                },
                { 
                    id: 'lup', icon: 'üê∫', title: 'Lupus', 
                    text: 'The Wolf. Sacrificed by Centaurus.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '35¬∞N to 90¬∞S', time: '9 PM (June)' },
                    data: { s: [[30,30], [60,30], [40,60], [70,50], [50,80]], l: [[0,1], [0,2], [2,4], [1,3], [3,4]] } 
                },
                { 
                    id: 'lyn', icon: 'üêà', title: 'Lynx', 
                    text: 'The Lynx. So faint you need lynx eyes to see it.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 55¬∞S', time: '9 PM (March)' },
                    data: { s: [[10,20], [30,40], [50,30], [70,50], [90,40]], l: [[0,1], [1,2], [2,3], [3,4]] } 
                },
                { 
                    id: 'lyr', icon: 'üéµ', title: 'Lyra', 
                    text: 'The Harp. The lyre of Orpheus.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 40¬∞S', time: '9 PM (August)' },
                    data: { s: [[50,15,5], [40,30], [60,30], [40,50], [60,50]], l: [[0,1], [0,2], [1,2], [1,3], [2,4], [3,4]] } 
                },
                { 
                    id: 'mon', icon: 'ü¶Ñ', title: 'Monoceros', 
                    text: 'The Unicorn. Faint constellation in the winter sky.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '75¬∞N to 85¬∞S', time: '9 PM (February)' },
                    data: { s: [[20,50], [40,40], [60,50], [80,40]], l: [[0,1], [1,2], [2,3]] } 
                },
                { 
                    id: 'oph', icon: '‚öïÔ∏è', title: 'Ophiuchus', 
                    text: 'The Serpent Bearer. Asclepius, the healer.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '80¬∞N to 80¬∞S', time: '9 PM (July)' },
                    data: { s: [[50,20], [30,50], [70,50], [40,80], [60,80]], l: [[0,1], [0,2], [1,3], [2,4], [3,4]] } 
                },
                { 
                    id: 'ori', icon: 'üèπ', title: 'Orion', 
                    text: 'The Hunter. A giant hunter placed in the stars.', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '85¬∞N to 75¬∞S', time: '9 PM (January)' },
                    data: { s: [[25,20,4], [75,25,4], [45,50], [50,50], [55,50], [30,80,4], [70,85,5]], l: [[0,2], [1,4], [2,3], [3,4], [2,5], [4,6]] } 
                },
                { 
                    id: 'pav', icon: 'ü¶ö', title: 'Pavo', 
                    text: 'The Peacock. Sacred bird of Hera.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '30¬∞N to 90¬∞S', time: '9 PM (August)' },
                    data: { s: [[80,20,4], [60,40], [40,50], [20,80]], l: [[0,1], [1,2], [2,3]] } 
                },
                { 
                    id: 'peg', icon: 'üêé', title: 'Pegasus', 
                    text: 'The Winged Horse. Born from Medusa\'s blood.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 60¬∞S', time: '9 PM (October)' },
                    data: { s: [[30,30], [70,30], [70,70], [30,70], [85,20], [20,20]], l: [[0,1], [1,2], [2,3], [3,0], [1,4], [0,5]] } 
                },
                { 
                    id: 'per', icon: '‚öîÔ∏è', title: 'Perseus', 
                    text: 'The Hero. Slayer of Medusa and savior of Andromeda.', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '90¬∞N to 35¬∞S', time: '9 PM (December)' },
                    data: { s: [[50,20], [30,50], [50,50,4], [70,60], [40,80]], l: [[0,2], [1,2], [2,3], [2,4]] } 
                },
                { 
                    id: 'phe', icon: 'üî•', title: 'Phoenix', 
                    text: 'The Firebird. Represents the mythical bird reborn from ashes.', 
                    visibility: { season: 'Autumn', hemisphere: 'Southern', lat: '32¬∞N to 90¬∞S', time: '9 PM (November)' },
                    data: { s: [[50,20], [20,50], [80,50], [40,80], [60,80]], l: [[0,1], [0,2], [1,3], [2,4], [3,4]] } 
                },
                { 
                    id: 'pic', icon: 'üé®', title: 'Pictor', 
                    text: 'The Easel. Painter\'s easel.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '25¬∞N to 90¬∞S', time: '9 PM (January)' },
                    data: { s: [[30,50], [70,50], [50,80]], l: [[0,2], [1,2]] } 
                },
                { 
                    id: 'psc', icon: '‚ôì', title: 'Pisces', 
                    text: 'The Fishes. Aphrodite and Eros tied together.', 
                    visibility: { season: 'Autumn', hemisphere: 'Northern', lat: '90¬∞N to 65¬∞S', time: '9 PM (November)' },
                    data: { s: [[20,50], [40,70], [60,70], [80,30], [50,50]], l: [[0,4], [4,3], [0,1], [1,2], [2,3]] } 
                },
                { 
                    id: 'psa', icon: 'üêü', title: 'Piscis Austrinus', 
                    text: 'The Southern Fish. Drinks water from Aquarius\'s jar.', 
                    visibility: { season: 'Autumn', hemisphere: 'Southern', lat: '55¬∞N to 90¬∞S', time: '9 PM (October)' },
                    data: { s: [[20,50], [50,30], [80,50,5], [50,70]], l: [[0,1], [1,2], [2,3], [3,0]] } 
                },
                { 
                    id: 'pup', icon: 'üö¢', title: 'Puppis', 
                    text: 'The Poop Deck. Stern of the Argo Navis.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '40¬∞N to 90¬∞S', time: '9 PM (February)' },
                    data: { s: [[30,20], [50,50], [70,30], [50,80]], l: [[0,1], [1,2], [1,3]] } 
                },
                { 
                    id: 'ret', icon: 'üï∏Ô∏è', title: 'Reticulum', 
                    text: 'The Reticle. Represents the crosshairs in a telescope eyepiece.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '23¬∞N to 90¬∞S', time: '9 PM (December)' },
                    data: { s: [[50,20], [20,50], [80,50], [50,80]], l: [[0,1], [1,3], [3,2], [2,0]] } 
                },
                { 
                    id: 'sge', icon: 'üèπ', title: 'Sagitta', 
                    text: 'The Arrow. Arrow of Hercules or Cupid.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 70¬∞S', time: '9 PM (August)' },
                    data: { s: [[20,50], [70,50], [80,40], [80,60]], l: [[0,1], [1,2], [1,3]] } 
                },
                { 
                    id: 'sgr', icon: '‚ôê', title: 'Sagittarius', 
                    text: 'The Archer. A centaur, usually Chiron or Crotus.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '55¬∞N to 90¬∞S', time: '9 PM (August)' },
                    data: { s: [[30,40], [70,40], [20,70], [80,70], [50,20], [50,50], [40,60], [60,60]], l: [[0,6], [6,2], [6,7], [7,3], [7,1], [0,5], [1,5], [5,4]] } 
                },
                { 
                    id: 'sco', icon: '‚ôè', title: 'Scorpius', 
                    text: 'The Scorpion. Sent to kill Orion.', 
                    visibility: { season: 'Summer', hemisphere: 'Southern', lat: '40¬∞N to 90¬∞S', time: '9 PM (July)' },
                    data: { s: [[80,20], [70,25], [60,30,5], [50,40], [45,50], [40,60], [35,70], [40,80], [50,85], [60,80]], l: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,8], [8,9]] } 
                },
                { 
                    id: 'ser', icon: 'üêç', title: 'Serpens', 
                    text: 'The Serpent. Held by Ophiuchus.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '80¬∞N to 80¬∞S', time: '9 PM (July)' },
                    data: { s: [[20,50], [40,40], [60,60], [80,50]], l: [[0,1], [1,2], [2,3]] } 
                },
                { 
                    id: 'tau', icon: '‚ôâ', title: 'Taurus', 
                    text: 'The Bull. Zeus in disguise carrying Europa.', 
                    visibility: { season: 'Winter', hemisphere: 'Northern', lat: '90¬∞N to 65¬∞S', time: '9 PM (January)' },
                    data: { s: [[20,50], [35,60], [50,65,5], [60,45], [75,30], [80,35], [45,80]], l: [[0,1], [1,2], [2,3], [3,4], [3,5], [2,6]] } 
                },
                { 
                    id: 'tuc', icon: 'ü¶ú', title: 'Tucana', 
                    text: 'The Toucan. A tropical bird, home to the Small Magellanic Cloud.', 
                    visibility: { season: 'Autumn', hemisphere: 'Southern', lat: '15¬∞N to 90¬∞S', time: '9 PM (November)' },
                    data: { s: [[40,30], [60,50], [40,70]], l: [[0,1], [1,2]] } 
                },
                { 
                    id: 'uma', icon: 'üêª', title: 'Ursa Major', 
                    text: 'The Great Bear. Callisto turned into a bear.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '90¬∞N to 30¬∞S', time: '9 PM (April)' },
                    data: { s: [[10,30], [25,25], [35,35], [50,45], [75,45], [75,70], [50,70]], l: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,3]] } 
                },
                { 
                    id: 'umi', icon: 'üêª', title: 'Ursa Minor', 
                    text: 'The Little Bear. Arcas, son of Callisto.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 10¬∞S', time: '9 PM (June)' },
                    data: { s: [[80,20,5], [70,30], [60,40], [50,45], [30,45], [25,60], [45,60]], l: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,3]] } 
                },
                { 
                    id: 'vel', icon: '‚õµ', title: 'Vela', 
                    text: 'The Sails. Sails of the Argo Navis.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '30¬∞N to 90¬∞S', time: '9 PM (March)' },
                    data: { s: [[30,30], [70,30], [50,60], [50,80]], l: [[0,1], [0,2], [1,2], [2,3]] } 
                },
                { 
                    id: 'vir', icon: '‚ôç', title: 'Virgo', 
                    text: 'The Maiden. Associated with justice and harvest.', 
                    visibility: { season: 'Spring', hemisphere: 'Northern', lat: '80¬∞N to 80¬∞S', time: '9 PM (May)' },
                    data: { s: [[50,50], [20,40], [80,40], [50,80,5], [35,30], [65,30], [50,20]], l: [[0,1], [0,2], [0,3], [1,4], [2,5], [4,6], [5,6]] } 
                },
                { 
                    id: 'vol', icon: 'üêü', title: 'Volans', 
                    text: 'The Flying Fish.', 
                    visibility: { season: 'Winter', hemisphere: 'Southern', lat: '15¬∞N to 90¬∞S', time: '9 PM (March)' },
                    data: { s: [[30,30], [70,30], [50,60]], l: [[0,1], [1,2], [2,0]] } 
                },
                { 
                    id: 'vul', icon: 'ü¶ä', title: 'Vulpecula', 
                    text: 'The Fox. The little fox with the goose.', 
                    visibility: { season: 'Summer', hemisphere: 'Northern', lat: '90¬∞N to 55¬∞S', time: '9 PM (September)' },
                    data: { s: [[30,50], [70,50]], l: [[0,1]] } 
                }
            ];

            const shuffleTracks = () => { const shuffled = [...MUSIC_POOL].sort(() => 0.5 - Math.random()); setCurrentTracks(shuffled.slice(0, 4)); };
            const shuffleConstellations = () => { const shuffled = [...CONSTELLATIONS_DB].sort(() => 0.5 - Math.random()); setCurrentConstellations(shuffled.slice(0, 4)); };
            useEffect(() => { shuffleTracks(); shuffleConstellations(); }, []);
            
            return ( 
                <div className="p-6 max-w-2xl mx-auto min-h-screen flex flex-col justify-center pb-24 relative z-10"> 
                    <h2 className="text-3xl font-serif text-center text-pink-200 mb-8 border-b border-slate-700 pb-4"> You as a Constellation </h2> 
                    <div className="bg-slate-800/50 rounded-xl p-4 mb-8 border border-slate-700 backdrop-blur-sm relative overflow-hidden group"> 
                        <div className="absolute top-0 right-0 p-2 opacity-50 group-hover:opacity-100 transition-opacity z-10"> 
                            <button onClick={shuffleTracks} className="p-2 bg-black/40 hover:bg-pink-500 rounded-full transition-colors" title="Shuffle Songs"> <RefreshCw size={16} className="text-white" /> </button> 
                        </div> 
                        <div className="flex items-center gap-4 mb-4"> 
                            <div className="w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-900 rounded-lg flex items-center justify-center animate-pulse"> <Music className="text-white w-8 h-8" /> </div> 
                            <div> <h3 className="text-white font-bold">Midnight Mixtape</h3> <p className="text-pink-400 text-sm">Music I listen to when I'm thinking of you</p> </div> 
                        </div> 
                        <div className="space-y-3"> {currentTracks.map((trackId, i) => ( <iframe key={i} style={{ borderRadius: '12px' }} src={`https://open.spotify.com/embed/track/${trackId}?utm_source=generator&theme=0`} width="100%" height="80" frameBorder="0" allowFullScreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" className="bg-slate-900" /> ))} </div> 
                    </div> 
                    <div className="flex justify-between items-center mb-4 px-2"> <h3 className="text-pink-200 font-bold text-lg">Star Map</h3> <button onClick={shuffleConstellations} className="p-2 bg-slate-800 hover:bg-pink-600/50 rounded-full transition-colors flex items-center gap-2 text-xs text-slate-400 hover:text-white"> <RefreshCw size={14} /> Shuffle Stars </button> </div> 
                    <div className="grid grid-cols-2 gap-4 mb-8"> {currentConstellations.map((c) => ( <button key={c.id} onClick={() => setActiveConstellation(c)} className="p-4 bg-slate-800/80 rounded-xl border border-slate-700 hover:border-pink-500/50 transition-all hover:scale-105 text-left group"> <div className="text-3xl mb-2 group-hover:animate-bounce shadow-white drop-shadow-md">{c.icon}</div> <h3 className="text-pink-200 font-bold text-sm">{c.title}</h3> </button> ))} </div> 
                    {activeConstellation && ( <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4" onClick={() => setActiveConstellation(null)}> <div className="bg-slate-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative transform scale-100 transition-transform flex flex-col items-center" onClick={e => e.stopPropagation()}> <button onClick={() => setActiveConstellation(null)} className="absolute top-2 right-2 text-slate-500 hover:text-white z-10"><X size={20}/></button> <ConstellationIllustration title={activeConstellation.title} icon={activeConstellation.icon} data={activeConstellation.data} /> <h3 className="text-2xl font-serif font-bold text-pink-400 mb-2 text-center">{activeConstellation.title}</h3> <p className="text-slate-300 text-center leading-relaxed text-sm mb-2">{activeConstellation.text}</p> {activeConstellation.visibility && <p className="text-pink-400 text-xs text-center font-mono mb-4">{activeConstellation.visibility.season} ‚Ä¢ {activeConstellation.visibility.time}</p>} <div className="mt-2 text-center text-xs text-slate-600">Tap anywhere to close</div> </div> </div> )} 
                </div> 
            );
        };

        // --- PAGE: MESSAGE ---
        const MsgPage = () => {
            return ( 
                <div className="min-h-screen flex flex-col items-center justify-center p-8 text-center animate-in fade-in duration-1000 relative z-10 pb-24"> 
                    <div className="w-32 h-32 rounded-full overflow-hidden border-4 border-pink-500 shadow-[0_0_30px_rgba(236,72,153,0.6)] mb-8 bg-slate-800 flex items-center justify-center transform hover:scale-105 transition-transform duration-500"> 
                        <span className="text-6xl">üñ§</span> 
                    </div> 
                    <h1 className="text-3xl md:text-5xl font-serif text-white mb-8 tracking-wide drop-shadow-lg">
                        For the hottest black pantheress
                    </h1> 
                    <div className="max-w-md bg-white/5 backdrop-blur-md p-8 rounded-2xl border border-pink-500/20 text-lg md:text-xl leading-relaxed text-pink-100 font-serif italic shadow-xl"> 
                        <p> 
                            I can't get over your dark aesthetic, your obsession with nectarines, and the way you look at me when I say something you like. I melt everytime you whisper my name or say that you want me. Keep s(p)it(t)ing on my face pls ü´†
                        </p> 
                    </div> 
                    <div className="mt-12 text-sm text-slate-500 font-mono opacity-60"> 
                        coded with ‚ù§Ô∏è by Banos 
                    </div> 
                </div> 
            );
        };

        // --- PAGE: ADVENT ---
        const AdventPage = () => {
             // Range: Dec 30, 2025 to Jan 14, 2026
            const ADVENT_DATA = [
                { day: 30, month: 11, year: 2025, icon: "‚ú®", title: "Manifest", text: "What do you want for the new year? Type it below and send it to the stars." },
                { day: 31, month: 11, year: 2025, icon: "ü•Ç", title: "NYE", text: "I wish I could drink tonight's wine from your mouthüôÑ. Happy new year<3 Tap the screen to celebrate!" },
                { day: 1, month: 0, year: 2026, icon: "üéÜ", title: "2026", text: "New year, same obsession with you. Break the cookie to reveal your fortune." },
                { day: 2, month: 0, year: 2026, icon: "üì¶", title: "Gift!", text: "Pop some bubbles to relax. The same bubbles that cover the gift you'll receive todayüò¨" },
                { day: 3, month: 0, year: 2026, icon: "üêà‚Äç‚¨õ", title: "Us", text: "You are the fiercest black cat. Scratch my skin whenever you feel like it." },
                { day: 4, month: 0, year: 2026, icon: "üíã", title: "Kisses", text: "I want to kiss you everywhere. Tap the box to leave a mark." },
                { day: 5, month: 0, year: 2026, icon: "üéÅ", title: "The Stars", text: "Our schedules never aligned, but it's nice to think that some day might. Bye <3" },
                { day: 13, month: 0, year: 2026, icon: "üìù", title: "Exam Day", text: "I know you crushed it (or will crush it)! Tap the stress monster to defeat it." },
                { day: 14, month: 0, year: 2026, icon: "üçÉ", title: "Ti 9.33 re mlkkkk (<3)", text: "Breathe in, breathe out. You did great. Take a moment to just be." }
            ];

             const SurpriseInteraction = ({ dayItem }) => {
                const [tapCount, setTapCount] = useState(0);
                const [textInput, setTextInput] = useState("");
                const [completed, setCompleted] = useState(false);
                const [sending, setSending] = useState(false);
                const [items, setItems] = useState([]);

                // --- DAY 30: MANIFEST ---
                if (dayItem.title === "Manifest") {
                    const sendWish = async () => {
                        if (!textInput.trim()) return;
                        setSending(true);
                        try {
                            await fetch("https://formsubmit.co/ajax/karadaglisp@gmail.com", {
                                method: "POST",
                                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                                body: JSON.stringify({ _subject: "‚ú® New Wish from Midnight Picnic", wish: textInput })
                            });
                        } catch (error) { console.error("Error sending wish:", error); }
                        setSending(false);
                        setCompleted(true);
                    };

                    return (
                        <div className="mt-4 w-full">
                            {completed ? (
                                <div className="text-center animate-pulse text-yellow-300">
                                    <div className="text-4xl mb-2">‚ú®üå†‚ú®</div>
                                    <p className="font-serif italic">Your wish has been sent to the universe.</p>
                                </div>
                            ) : (
                                <div className="flex flex-col gap-2">
                                    <input 
                                        type="text" 
                                        value={textInput}
                                        onChange={(e) => setTextInput(e.target.value)}
                                        placeholder="I wish for..." 
                                        className="bg-slate-800 border border-slate-600 rounded p-2 text-white text-center focus:border-pink-500 outline-none"
                                        disabled={sending}
                                    />
                                    <button 
                                        onClick={sendWish} 
                                        disabled={sending}
                                        className="bg-pink-600 hover:bg-pink-500 text-white rounded p-2 font-bold disabled:opacity-50 transition-colors"
                                    >
                                        {sending ? "Sending..." : "Send to Stars"}
                                    </button>
                                </div>
                            )}
                        </div>
                    );
                }

                // --- DAY 31: FIREWORKS ---
                if (dayItem.title === "NYE") {
                    const addFirework = (e) => {
                        const rect = e.currentTarget.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const baseId = Date.now() + Math.random();
                        const colors = ['#ef4444', '#f97316', '#f59e0b', '#84cc16', '#06b6d4', '#8b5cf6', '#d946ef', '#f43f5e'];
                        
                        const newParticles = [];
                        for(let i=0; i<40; i++) {
                            const angle = (Math.PI * 2 * i) / 40;
                            const velocity = 50 + Math.random() * 100;
                            newParticles.push({
                                id: baseId + i,
                                x, y,
                                color: colors[Math.floor(Math.random() * colors.length)],
                                tx: Math.cos(angle) * velocity + (Math.random() * 20 - 10) + 'px',
                                ty: Math.sin(angle) * velocity + (Math.random() * 20 - 10) + 'px',
                                size: Math.random() * 4 + 2 + 'px'
                            });
                        }
                        setItems(prev => [...prev, ...newParticles]);
                        setTimeout(() => setItems(prev => prev.filter(p => p.id < baseId)), 2500);
                    };

                    return (
                        <div 
                            className="mt-4 w-full h-48 bg-slate-900 rounded-xl relative overflow-hidden cursor-pointer border border-slate-600 touch-none shadow-inner"
                            onClick={addFirework}
                            style={{background: 'radial-gradient(circle at bottom, #1e293b 0%, #020617 100%)'}}
                        >
                            <div className="absolute inset-0 flex items-center justify-center text-slate-500 pointer-events-none font-mono text-xs opacity-60">Tap anywhere for magic</div>
                            {items.map(p => (
                                <div key={p.id} className="absolute rounded-full firework-particle" style={{ left: p.x, top: p.y, width: p.size, height: p.size, backgroundColor: p.color, boxShadow: `0 0 6px ${p.color}`, '--tx': p.tx, '--ty': p.ty }}></div>
                            ))}
                        </div>
                    );
                }

                // --- JAN 1: FORTUNE ---
                if (dayItem.title === "2026") {
                    const message = "This year is going to be spicyüå∂Ô∏è. You will achieve greatness üëë in Germany. And you'll become even sexierü´†.";
                    const reveal = () => { if (!completed) setCompleted(true); };

                    return (
                        <div className="mt-8 flex flex-col items-center justify-center relative h-40 w-full cursor-pointer perspective-1000" onClick={reveal}>
                             <div className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white text-slate-900 p-3 shadow-2xl border-l-4 border-pink-500 font-serif text-sm text-center italic w-64 z-10 transition-all duration-1000 origin-center ${completed ? 'scale-100 opacity-100 rotate-[-1deg]' : 'scale-0 opacity-0 rotate-[10deg]'}`}>
                                {message}
                             </div>
                             <div className={`absolute z-20 transition-all duration-1000 ease-out ${completed ? '-translate-x-16 translate-y-8 rotate-[-30deg] opacity-0' : 'translate-x-0'}`}>
                                 <svg width="60" height="100" viewBox="0 0 60 100" className="drop-shadow-xl" style={{overflow: 'visible'}}>
                                    <path d="M60,25 Q10,10 10,70 Q35,85 60,75 Z" fill="#fcd34d" stroke="#d97706" strokeWidth="2" />
                                    <path d="M20,65 Q30,75 50,70" fill="none" stroke="#d97706" strokeWidth="1" opacity="0.5" />
                                 </svg>
                             </div>
                             <div className={`absolute z-20 transition-all duration-1000 ease-out ${completed ? 'translate-x-16 translate-y-8 rotate-[30deg] opacity-0' : 'translate-x-0'}`}>
                                 <svg width="60" height="100" viewBox="0 0 60 100" className="drop-shadow-xl" style={{overflow: 'visible', marginLeft: '-2px'}}> 
                                    <path d="M0,25 Q50,10 50,70 Q25,85 0,75 Z" fill="#fcd34d" stroke="#d97706" strokeWidth="2" />
                                    <path d="M40,65 Q30,75 10,70" fill="none" stroke="#d97706" strokeWidth="1" opacity="0.5" />
                                 </svg>
                             </div>
                             {!completed && <div className="absolute -bottom-8 w-full text-center text-xs text-slate-500 font-mono tracking-widest uppercase animate-pulse">Tap to Crack</div>}
                        </div>
                    );
                }

                // --- JAN 2: BUBBLE WRAP ---
                if (dayItem.title === "Gift!") {
                    if (items.length === 0 && !completed) { setItems(Array(15).fill(false)); setCompleted(true); }

                    const playPop = () => {
                        try {
                            const AudioContext = window.AudioContext || window.webkitAudioContext;
                            if (!AudioContext) return;
                            const ctx = new AudioContext();
                            const osc = ctx.createOscillator();
                            const gain = ctx.createGain();
                            osc.connect(gain); gain.connect(ctx.destination);
                            osc.type = 'sine'; osc.frequency.setValueAtTime(800, ctx.currentTime);
                            osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.1);
                            gain.gain.setValueAtTime(0.3, ctx.currentTime); gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
                            osc.start(); osc.stop(ctx.currentTime + 0.1);
                        } catch (e) {}
                    };
                    
                    const pop = (idx) => {
                        const newItems = [...items];
                        if (!newItems[idx]) { playPop(); newItems[idx] = true; setItems(newItems); }
                    };

                    return (
                        <div className="mt-4 grid grid-cols-5 gap-2 bg-slate-800 p-3 rounded-xl border border-slate-700">
                            {items.map((popped, idx) => (
                                <button key={idx} onClick={() => pop(idx)} className={`w-full aspect-square rounded-full transition-all ${popped ? 'bg-slate-900 shadow-inner scale-90 opacity-50' : 'bg-pink-500/20 hover:bg-pink-500/40 border border-pink-500/30 shadow-lg cursor-pointer active:scale-90'}`}>
                                    {popped && <span className="text-[8px]">pop</span>}
                                </button>
                            ))}
                        </div>
                    );
                }

                // --- JAN 3: PET CAT ---
                if (dayItem.title === "Us") {
                    return (
                        <div className="mt-4 flex flex-col items-center">
                            <button onClick={() => setTapCount(p => p + 1)} className="text-6xl transition-transform active:scale-90 hover:scale-110 relative group">
                                üêà‚Äç‚¨õ
                                <div className="absolute -top-4 -right-4 text-2xl opacity-0 group-active:opacity-100 transition-opacity animate-bounce">‚ù§Ô∏è</div>
                            </button>
                            <div className="mt-2 font-mono text-pink-300 text-sm">{tapCount} Pets Given</div>
                        </div>
                    );
                }

                // --- JAN 4: KISSES ---
                if (dayItem.title === "Kisses") {
                    const addKiss = (e) => {
                        const rect = e.currentTarget.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const rotation = Math.random() * 40 - 20;
                        setItems(prev => [...prev, { id: Date.now(), x, y, rotation }]);
                    };
                    
                    return (
                        <div className="mt-4 w-full h-40 bg-pink-100/10 rounded-xl relative overflow-hidden border border-pink-500/30 cursor-pointer active:bg-pink-100/20 transition-colors touch-none" onClick={addKiss}>
                             {items.length === 0 && <div className="absolute inset-0 flex items-center justify-center text-pink-300/50 font-mono text-xs pointer-events-none">Tap to kiss</div>}
                            {items.map((k) => (
                                <div key={k.id} className="absolute text-4xl animate-in zoom-in duration-200" style={{ left: k.x - 15, top: k.y - 15, transform: `rotate(${k.rotation}deg)`, opacity: 0.8 }}>üíã</div>
                            ))}
                            {items.length > 0 && <button onClick={(e) => {e.stopPropagation(); setItems([]);}} className="absolute bottom-2 right-2 text-xs text-slate-400 hover:text-white bg-slate-900/50 px-2 py-1 rounded">Clear</button>}
                        </div>
                    );
                }

                // --- JAN 5 (THE STARS) ---
                if (dayItem.title === "The Stars") {
                    const nextState = () => { if (tapCount < 2) setTapCount(p => p + 1); };
                    return (
                        <div className="mt-6 flex justify-center pb-4">
                            <button onClick={nextState} className="relative w-32 h-32 flex items-center justify-center transition-transform hover:scale-105 active:scale-95">
                                {tapCount === 0 && <div className="text-8xl animate-bounce">üéÅ</div>}
                                {tapCount === 1 && <div className="text-8xl">üì¶</div>}
                                {tapCount === 2 && (
                                    <div className="animate-in zoom-in duration-500 text-center">
                                        <div className="text-6xl mb-2">ü™ê</div>
                                        <div className="text-4xl mb-2">‚ú®</div>
                                        <div className="text-xs text-pink-300 font-bold bg-slate-900/80 px-2 py-1 rounded border border-pink-500/50">For your room</div>
                                    </div>
                                )}
                            </button>
                        </div>
                    );
                }

                // --- JAN 13: STRESS MONSTER ---
                if (dayItem.title === "Exam Day") {
                    const [health, setHealth] = useState(10);
                    
                    const hitMonster = () => {
                        if (health > 0) {
                            setHealth(h => h - 1);
                            // Simple visual shake effect could be added here if we had more css, 
                            // but react state update is enough for interactivity
                        }
                    };

                    if (health <= 0) {
                        return (
                            <div className="mt-4 text-center animate-in zoom-in duration-500">
                                <div className="text-6xl mb-2">üéâ</div>
                                <p className="text-pink-300 font-bold">Stress Defeated!</p>
                                <p className="text-sm text-slate-400">Time to relax.</p>
                            </div>
                        );
                    }

                    return (
                        <div className="mt-4 flex flex-col items-center">
                            <div className="w-full bg-slate-800 h-4 rounded-full mb-4 overflow-hidden border border-slate-600">
                                <div 
                                    className="bg-red-500 h-full transition-all duration-200 ease-out" 
                                    style={{ width: `${(health / 10) * 100}%` }}
                                />
                            </div>
                            <button 
                                onClick={hitMonster} 
                                className="text-8xl active:scale-90 transition-transform cursor-pointer hover:scale-110 filter drop-shadow-lg"
                            >
                                üëæ
                            </button>
                            <p className="mt-2 text-xs text-slate-500 font-mono">Tap to attack!</p>
                        </div>
                    );
                }

                // --- JAN 14: BUBBLE GAME ---
                if (dayItem.title === "Ti 9.33 re mlkkkk (<3)") {
                    const [score, setScore] = useState(0);
                    const [timeLeft, setTimeLeft] = useState(10);
                    const [isPlaying, setIsPlaying] = useState(false);
                    const [bubbles, setBubbles] = useState([]);
                    const [gameOver, setGameOver] = useState(false);

                    useEffect(() => {
                        if (isPlaying && timeLeft > 0) {
                            const timer = setInterval(() => setTimeLeft(t => t - 1), 1000);
                            const spawner = setInterval(() => {
                                setBubbles(prev => [
                                    ...prev, 
                                    { 
                                        id: Date.now(), 
                                        x: Math.random() * 80 + 10, 
                                        y: Math.random() * 80 + 10,
                                        size: Math.random() * 20 + 30 
                                    }
                                ]);
                            }, 500);
                            return () => { clearInterval(timer); clearInterval(spawner); };
                        } else if (timeLeft === 0 && isPlaying) {
                            setIsPlaying(false);
                            setGameOver(true);
                        }
                    }, [isPlaying, timeLeft]);

                    const startGame = () => {
                        setScore(0);
                        setTimeLeft(10);
                        setBubbles([]);
                        setGameOver(false);
                        setIsPlaying(true);
                    };

                    const popBubble = (id) => {
                        setBubbles(prev => prev.filter(b => b.id !== id));
                        setScore(s => s + 1);
                    };

                    if (gameOver) {
                        return (
                            <div className="mt-4 text-center">
                                <p className="text-4xl font-bold text-white mb-2">{score}</p>
                                <p className="text-pink-300 mb-4">Bubbles Popped!</p>
                                <button 
                                    onClick={startGame}
                                    className="px-6 py-2 bg-white text-black rounded-full font-bold hover:bg-pink-200 transition-colors"
                                >
                                    Play Again
                                </button>
                            </div>
                        );
                    }

                    if (!isPlaying) {
                        return (
                            <div className="mt-4 text-center">
                                <button 
                                    onClick={startGame}
                                    className="px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full font-bold hover:scale-105 transition-transform shadow-lg"
                                >
                                    Start Game
                                </button>
                                <p className="mt-2 text-xs text-slate-400">Pop as many as you can in 10s!</p>
                            </div>
                        );
                    }

                    return (
                        <div className="mt-4 w-full h-48 bg-slate-800 rounded-xl relative overflow-hidden border border-slate-600">
                            <div className="absolute top-2 right-2 font-mono text-white bg-black/50 px-2 rounded">
                                00:{timeLeft < 10 ? `0${timeLeft}` : timeLeft}
                            </div>
                            <div className="absolute top-2 left-2 font-bold text-pink-400">
                                Score: {score}
                            </div>
                            {bubbles.map(b => (
                                <div
                                    key={b.id}
                                    onClick={(e) => { e.stopPropagation(); popBubble(b.id); }}
                                    className="absolute rounded-full bg-pink-400/30 border border-pink-200/50 cursor-pointer active:scale-90 transition-transform animate-in zoom-in duration-300"
                                    style={{
                                        left: `${b.x}%`,
                                        top: `${b.y}%`,
                                        width: `${b.size}px`,
                                        height: `${b.size}px`,
                                        transform: 'translate(-50%, -50%)'
                                    }}
                                />
                            ))}
                        </div>
                    );
                }

                return null;
            };

            const [selectedDay, setSelectedDay] = useState(null);
            
            // Current date setup (Assuming app is viewed in 2026, all past dates are unlocked)
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            return (
                <div className="h-full flex flex-col p-4 animate-in fade-in max-w-lg mx-auto w-full relative z-10 pb-24">
                    <div className="flex flex-col items-center justify-center mb-8 pt-8">
                        <h1 className="text-3xl font-serif text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-300 to-purple-300 drop-shadow-md">
                            Midnight Picnic
                        </h1>
                        <p className="text-slate-400 text-xs tracking-widest uppercase mt-2">Advent Calendar</p>
                    </div>
                    
                    <div className="flex-1 overflow-y-auto scrollbar-hide pb-20 flex items-start justify-center">
                        <div className="grid grid-cols-3 gap-4 w-full">
                            {ADVENT_DATA.map((item, index) => {
                                const itemDate = new Date(item.year, item.month, item.day);
                                const isLocked = itemDate > today; // Lock logic based on real date
                                const isToday = itemDate.getTime() === today.getTime();
                                const dateLabel = itemDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                                
                                return (
                                    <button
                                        key={index}
                                        onClick={() => !isLocked && setSelectedDay(item)}
                                        disabled={isLocked}
                                        className={`
                                            aspect-square rounded-2xl flex flex-col items-center justify-center relative transition-all duration-300 border-2
                                            ${isLocked 
                                                ? 'bg-slate-800/50 border-slate-700 text-slate-600' 
                                                : isToday 
                                                    ? 'bg-gradient-to-br from-pink-600 to-purple-600 text-white shadow-[0_0_20px_rgba(236,72,153,0.5)] scale-105 border-pink-400 animate-pulse' 
                                                    : 'bg-slate-700/80 border-slate-600 text-pink-200 hover:bg-slate-600 hover:border-pink-500/50 hover:scale-105'}
                                        `}
                                    >
                                        <span className="text-[10px] font-mono font-bold mb-1 opacity-70 uppercase tracking-wider">{dateLabel}</span>
                                        {isLocked ? (
                                            <Lock size={20} />
                                        ) : (
                                            <span className="text-3xl filter drop-shadow-lg">{item.icon}</span>
                                        )}
                                    </button>
                                );
                            })}
                        </div>
                    </div>

                    {/* Modal for Day Content */}
                    {selectedDay && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-6 animate-in zoom-in-95 duration-200" onClick={() => setSelectedDay(null)}>
                            <div className="bg-slate-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full text-center relative shadow-[0_0_50px_rgba(236,72,153,0.3)] overflow-hidden" onClick={e => e.stopPropagation()}>
                                <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-pink-500/10 to-transparent pointer-events-none"></div>
                                <button onClick={() => setSelectedDay(null)} className="absolute top-2 right-2 text-slate-500 hover:text-white p-2 z-10"><X size={24} /></button>
                                
                                <div className="text-7xl mb-4 animate-bounce relative z-10">{selectedDay.icon}</div>
                                <h3 className="text-2xl font-bold text-pink-300 mb-2 relative z-10 font-serif">{selectedDay.title}</h3>
                                <div className="w-16 h-1 bg-pink-500/30 mx-auto mb-4 rounded-full"></div>
                                <p className="text-lg text-slate-200 leading-relaxed font-serif italic relative z-10">"{selectedDay.text}"</p>
                                
                                <div className="relative z-10">
                                    <SurpriseInteraction dayItem={selectedDay} />
                                </div>
                                <div className="mt-6 text-xs text-slate-500 font-mono relative z-10">
                                    {new Date(selectedDay.year, selectedDay.month, selectedDay.day).toLocaleDateString(undefined, {weekday: 'long', month: 'long', day: 'numeric'})}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [activeTab, setActiveTab] = useState('home');

            // Check session storage to persist login
            useEffect(() => {
                if (sessionStorage.getItem('midnight_auth') === 'true') {
                    setIsAuthenticated(true);
                }
            }, []);

            const handleLogin = () => {
                sessionStorage.setItem('midnight_auth', 'true');
                setIsAuthenticated(true);
            };

            const renderContent = () => {
                switch(activeTab) {
                    case 'home': return <HomePage onNavigate={setActiveTab} />;
                    case 'study': return <StudyPage />;
                    case 'stars': return <StarsPage />;
                    case 'msg': return <MsgPage />;
                    case 'advent': return <AdventPage />;
                    default: return <HomePage onNavigate={setActiveTab} />;
                }
            };

            if (!isAuthenticated) {
                return <AuthPage onLogin={handleLogin} />;
            }

            return (
                <div className="bg-slate-950 min-h-screen text-slate-200 font-sans selection:bg-pink-500 selection:text-white relative overflow-hidden flex flex-col items-center">
                    <StarBackground />
                    <div className="w-full h-full flex-1 overflow-hidden">
                        {renderContent()}
                    </div>
                    <NavBar activeTab={activeTab} onTabChange={setActiveTab} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>